-- MySQL Script generated by MySQL Workbench
-- 08/06/16 21:36:55
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema corea_library
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema corea_library
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `corea_library` DEFAULT CHARACTER SET utf8 ;
USE `corea_library` ;

-- -----------------------------------------------------
-- Table `corea_library`.`PARENTESCO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`PARENTESCO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`PARENTESCO` (
  `ID_PARENTESCO` INT NOT NULL,
  `DESCRIPCION_PARENTESCO` VARCHAR(100) NULL,
  PRIMARY KEY (`ID_PARENTESCO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `corea_library`.`DEPARTAMENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`DEPARTAMENTO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`DEPARTAMENTO` (
  `ID_DEPARTAMENTO` INT(11) NOT NULL,
  `NOMBRE_DEPARTAMENTO` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_DEPARTAMENTO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `corea_library`.`MUNICIPIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`MUNICIPIO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`MUNICIPIO` (
  `ID_MUNICIPIO` INT(11) NOT NULL,
  `NOMBRE_MUNICIPIO` VARCHAR(45) NULL,
  `DEPARTAMENTO_ID_DEPARTAMENTO` INT(11) NOT NULL,
  PRIMARY KEY (`ID_MUNICIPIO`),
  INDEX `fk_MUNICIPIO_DEPARTAMENTO1_idx` (`DEPARTAMENTO_ID_DEPARTAMENTO` ASC),
  CONSTRAINT `fk_MUNICIPIO_DEPARTAMENTO1`
    FOREIGN KEY (`DEPARTAMENTO_ID_DEPARTAMENTO`)
    REFERENCES `corea_library`.`DEPARTAMENTO` (`ID_DEPARTAMENTO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `corea_library`.`ENCARGADO_ALUMNO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`ENCARGADO_ALUMNO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`ENCARGADO_ALUMNO` (
  `CODIGO_ENCARGADO` INT(11) NOT NULL DEFAULT '0',
  `NOMBRES_ENCARGADO` VARCHAR(45) NULL DEFAULT NULL,
  `APELLIDOS_ENCARGADO` VARCHAR(45) NULL DEFAULT NULL,
  `DIRECCION` VARCHAR(45) NULL DEFAULT NULL,
  `TELEFONO` INT(11) NULL DEFAULT NULL,
  `PARENTESCO_IDPARENTESCO` INT(11) NULL,
  `MUNICIPIO_ID_MUNICIPIO` INT(11) NOT NULL,
  PRIMARY KEY (`CODIGO_ENCARGADO`),
  INDEX `IdParentesco_idx` (`PARENTESCO_IDPARENTESCO` ASC),
  INDEX `fk_ENCARGADO_ALUMNO_MUNICIPIO1_idx` (`MUNICIPIO_ID_MUNICIPIO` ASC),
  CONSTRAINT `fk_PARENTESCO_ID_PARENTESCO`
    FOREIGN KEY (`PARENTESCO_IDPARENTESCO`)
    REFERENCES `corea_library`.`PARENTESCO` (`ID_PARENTESCO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ENCARGADO_ALUMNO_MUNICIPIO1`
    FOREIGN KEY (`MUNICIPIO_ID_MUNICIPIO`)
    REFERENCES `corea_library`.`MUNICIPIO` (`ID_MUNICIPIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`GRADO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`GRADO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`GRADO` (
  `CODIGO_GRADO` INT(11) NOT NULL,
  `DESCRIPCION_GRADO` VARCHAR(100) NULL,
  PRIMARY KEY (`CODIGO_GRADO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `corea_library`.`ALUMNO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`ALUMNO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`ALUMNO` (
  `CARNET` INT(11) NOT NULL DEFAULT '0',
  `PRIMER_NOMBRE` VARCHAR(15) NULL DEFAULT NULL,
  `SEGUNDO_NOMBRE` VARCHAR(15) NULL DEFAULT NULL,
  `PRIMER_APELLIDO` VARCHAR(15) NULL DEFAULT NULL,
  `SEGUNDO_APELLIDO` VARCHAR(15) NULL DEFAULT NULL,
  `DIRECCION` VARCHAR(50) NULL DEFAULT NULL,
  `SEXO` TINYINT(1) NULL DEFAULT NULL,
  `EDAD` INT(11) NULL DEFAULT NULL,
  `GRADO_CODIGO_GRADO` INT(11) NOT NULL,
  `ENCARGADO_ALUMNOS_CODIGO_ENCARGADO` INT(11) NULL,
  `MUNICIPIO_ID_MUNICIPIO` INT(11) NOT NULL,
  PRIMARY KEY (`CARNET`),
  INDEX `fk_ALUMNO_PADRES_ALUMNOS1_idx` (`ENCARGADO_ALUMNOS_CODIGO_ENCARGADO` ASC),
  INDEX `fk_GRADO_CODIGO_GRADO_idx` (`GRADO_CODIGO_GRADO` ASC),
  INDEX `fk_ALUMNO_MUNICIPIO1_idx` (`MUNICIPIO_ID_MUNICIPIO` ASC),
  CONSTRAINT `fk_ALUMNO_PADRES_ALUMNOS1`
    FOREIGN KEY (`ENCARGADO_ALUMNOS_CODIGO_ENCARGADO`)
    REFERENCES `corea_library`.`ENCARGADO_ALUMNO` (`CODIGO_ENCARGADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_GRADO_CODIGO_GRADO`
    FOREIGN KEY (`GRADO_CODIGO_GRADO`)
    REFERENCES `corea_library`.`GRADO` (`CODIGO_GRADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ALUMNO_MUNICIPIO1`
    FOREIGN KEY (`MUNICIPIO_ID_MUNICIPIO`)
    REFERENCES `corea_library`.`MUNICIPIO` (`ID_MUNICIPIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`ASIGNATURA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`ASIGNATURA` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`ASIGNATURA` (
  `CODIGO_ASIGNATURA` INT(11) NOT NULL DEFAULT '0',
  `NOMBRE ASIGNATURA` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`CODIGO_ASIGNATURA`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`AUTOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`AUTOR` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`AUTOR` (
  `CODIGO_AUTOR` INT(11) NOT NULL,
  `NOMBRE_AUTOR` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`CODIGO_AUTOR`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`ROL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`ROL` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`ROL` (
  `ID_ROL` INT(11) NOT NULL,
  `DESCRIPCION_ROL` VARCHAR(100) NULL,
  PRIMARY KEY (`ID_ROL`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `corea_library`.`USUARIO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`USUARIO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`USUARIO` (
  `CODIGO_USUARIO` INT(11) NOT NULL DEFAULT '0',
  `NOMBRE_USUARIO` VARCHAR(45) NULL DEFAULT NULL,
  `ROL_USUARIO` VARCHAR(45) NULL DEFAULT NULL,
  `CONTRASEÃ‘A` VARCHAR(45) NOT NULL,
  `ROL_ID_ROL` INT(11) NOT NULL,
  PRIMARY KEY (`CODIGO_USUARIO`),
  INDEX `IdRol_idx` (`ROL_ID_ROL` ASC),
  CONSTRAINT `fk_ID_ROL_ID`
    FOREIGN KEY (`ROL_ID_ROL`)
    REFERENCES `corea_library`.`ROL` (`ID_ROL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`EDITORIAL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`EDITORIAL` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`EDITORIAL` (
  `CODIGO_EDITORIAL` INT(11) NOT NULL,
  `NOMBRE_EDITORIAL` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`CODIGO_EDITORIAL`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`EMPLEADO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`EMPLEADO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`EMPLEADO` (
  `CODIGO_EMPLEADO` INT(11) NOT NULL DEFAULT '0',
  `NOMBRE_EMPLEADO` VARCHAR(45) NULL DEFAULT NULL,
  `APELLIDO_EMPLEADO` VARCHAR(45) NULL DEFAULT NULL,
  `USUARIO_CODIGO_USUARIO` INT(11) NOT NULL,
  `MUNICIPIO_ID_MUNICIPIO` INT(11) NOT NULL,
  PRIMARY KEY (`CODIGO_EMPLEADO`, `USUARIO_CODIGO_USUARIO`, `MUNICIPIO_ID_MUNICIPIO`),
  INDEX `CODIGO_USUARIO_idx` (`USUARIO_CODIGO_USUARIO` ASC),
  INDEX `fk_EMPLEADO_MUNICIPIO1_idx` (`MUNICIPIO_ID_MUNICIPIO` ASC),
  CONSTRAINT `fk_USUARIO_CODIGO_USUARIO`
    FOREIGN KEY (`USUARIO_CODIGO_USUARIO`)
    REFERENCES `corea_library`.`USUARIO` (`CODIGO_USUARIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EMPLEADO_MUNICIPIO1`
    FOREIGN KEY (`MUNICIPIO_ID_MUNICIPIO`)
    REFERENCES `corea_library`.`MUNICIPIO` (`ID_MUNICIPIO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`EJEMPLAR_LIBRO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`EJEMPLAR_LIBRO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`EJEMPLAR_LIBRO` (
  `ID_EJEMPLAR` INT(11) NOT NULL,
  `CODIGO_EJEMPLAR` INT(11) NULL,
  `ID_LIBRO` INT(11) NULL,
  `TIPO_CUBIERTA` VARCHAR(45) NULL,
  `DESCRIPCION_FISICA` VARCHAR(45) NULL,
  PRIMARY KEY (`ID_EJEMPLAR`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `corea_library`.`LIBRO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`LIBRO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`LIBRO` (
  `CODIGO_LIBRO` INT(11) NOT NULL DEFAULT '0',
  `TITULO LIBRO` VARCHAR(45) NULL DEFAULT NULL,
  `UBICACION` VARCHAR(45) NULL DEFAULT NULL,
  `CANTIDAD EN EXISTENCIA` INT(11) NULL DEFAULT NULL,
  `AUTOR_CODIGO_AUTOR` INT(11) NULL,
  `EDITORIAL_CODIGO_EDITORIAL` INT(11) NOT NULL,
  `ASIGNATURA_CODIGO_ASIGNATURA` INT(11) NOT NULL,
  `EJEMPLAR_LIBRO_ID_EJEMPLAR` INT(11) NULL,
  PRIMARY KEY (`CODIGO_LIBRO`),
  INDEX `fk_LIBROS_AUTOR_idx` (`AUTOR_CODIGO_AUTOR` ASC),
  INDEX `fk_LIBROS_EDITORIAL1_idx` (`EDITORIAL_CODIGO_EDITORIAL` ASC),
  INDEX `fk_LIBROS_ASIGNATURA1_idx` (`ASIGNATURA_CODIGO_ASIGNATURA` ASC),
  INDEX `fk_EJEMPLAR_LIBRO_ID_EJEMPLAR_idx` (`EJEMPLAR_LIBRO_ID_EJEMPLAR` ASC),
  CONSTRAINT `fk_LIBROS_ASIGNATURA_LIBRO`
    FOREIGN KEY (`ASIGNATURA_CODIGO_ASIGNATURA`)
    REFERENCES `corea_library`.`ASIGNATURA` (`CODIGO_ASIGNATURA`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_LIBROS_AUTOR_LIBRO`
    FOREIGN KEY (`AUTOR_CODIGO_AUTOR`)
    REFERENCES `corea_library`.`AUTOR` (`CODIGO_AUTOR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_LIBROS_EDITORIAL_LIBRO`
    FOREIGN KEY (`EDITORIAL_CODIGO_EDITORIAL`)
    REFERENCES `corea_library`.`EDITORIAL` (`CODIGO_EDITORIAL`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EJEMPLAR_LIBRO_ID_EJEMPLAR_LIBRO`
    FOREIGN KEY (`EJEMPLAR_LIBRO_ID_EJEMPLAR`)
    REFERENCES `corea_library`.`EJEMPLAR_LIBRO` (`ID_EJEMPLAR`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `corea_library`.`PRESTAMO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `corea_library`.`PRESTAMO` ;

CREATE TABLE IF NOT EXISTS `corea_library`.`PRESTAMO` (
  `ID_PRESTAMO` INT(11) NOT NULL,
  `EXISTENCIA` INT(11) NULL DEFAULT NULL,
  `FECHA_PRESTAMO` INT(11) NULL DEFAULT NULL,
  `FECHA_DEVUELTO` INT(11) NULL DEFAULT NULL,
  `ALUMNO_CARNET` INT(11) NOT NULL,
  `LIBRO_CODIGO_LIBRO` INT(11) NOT NULL,
  `EMPLEADO_CODIGO_EMPLEADO` INT(11) NOT NULL,
  PRIMARY KEY (`ID_PRESTAMO`),
  INDEX `fk_PRESTAMO_ALUMNO1_idx` (`ALUMNO_CARNET` ASC),
  INDEX `fk_PRESTAMO_LIBROS1_idx` (`LIBRO_CODIGO_LIBRO` ASC),
  INDEX `fk_PRESTAMO_EMPLEADOS1_idx` (`EMPLEADO_CODIGO_EMPLEADO` ASC),
  CONSTRAINT `fk_ALUMNO_CARNET`
    FOREIGN KEY (`ALUMNO_CARNET`)
    REFERENCES `corea_library`.`ALUMNO` (`CARNET`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_EMPLEADO_CODIGO_EMPLEADO`
    FOREIGN KEY (`EMPLEADO_CODIGO_EMPLEADO`)
    REFERENCES `corea_library`.`EMPLEADO` (`CODIGO_EMPLEADO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_LIBRO_CODIGO_LIBRO`
    FOREIGN KEY (`LIBRO_CODIGO_LIBRO`)
    REFERENCES `corea_library`.`LIBRO` (`CODIGO_LIBRO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
